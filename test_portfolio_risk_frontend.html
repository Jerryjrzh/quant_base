<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æŒä»“é£é™©è¯„ä¼°åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #f0f2f5; 
            margin: 0;
            padding: 20px;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #dee2e6;
            border-radius: 6px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #495057;
        }
        
        /* å¤åˆ¶å‰ç«¯æ ·å¼ */
        .portfolio-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        .portfolio-table th,
        .portfolio-table td {
            padding: 0.8rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        .portfolio-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }
        
        .portfolio-table tbody tr:hover {
            background-color: #f8f9fa;
        }
        
        .profit-positive { color: #28a745; font-weight: 600; }
        .profit-negative { color: #dc3545; font-weight: 600; }
        .profit-neutral { color: #6c757d; }
        
        .action-buy { background: #d4edda; color: #155724; padding: 0.2rem 0.5rem; border-radius: 3px; font-size: 0.8rem; }
        .action-hold { background: #fff3cd; color: #856404; padding: 0.2rem 0.5rem; border-radius: 3px; font-size: 0.8rem; }
        .action-reduce { background: #f8d7da; color: #721c24; padding: 0.2rem 0.5rem; border-radius: 3px; font-size: 0.8rem; }
        
        .risk-high { color: #dc3545; font-weight: 600; }
        .risk-medium { color: #ffc107; font-weight: 600; }
        .risk-low { color: #28a745; font-weight: 600; }
        
        .risk-clickable {
            cursor: pointer;
            text-decoration: underline;
            transition: opacity 0.2s;
        }
        
        .risk-clickable:hover {
            opacity: 0.7;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 8px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: black;
        }
        
        .risk-detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .risk-detail-section {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .risk-detail-section h4 {
            margin: 0 0 1rem 0;
            color: #495057;
            font-size: 1.1rem;
        }
        
        .risk-score-display {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .risk-score-high {
            background: #f8d7da;
            color: #721c24;
        }
        
        .risk-score-medium {
            background: #fff3cd;
            color: #856404;
        }
        
        .risk-score-low {
            background: #d4edda;
            color: #155724;
        }
        
        .feature-highlight {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
        }
        
        .feature-highlight h4 {
            margin-top: 0;
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>æŒä»“é£é™©è¯„ä¼°åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="feature-highlight">
            <h4>ğŸ¯ æ–°å¢åŠŸèƒ½</h4>
            <ul>
                <li><strong>æ”¯æ’‘é˜»åŠ›ä½æ˜¾ç¤º</strong>: æŒä»“åˆ—è¡¨æ–°å¢æ”¯æ’‘ä½å’Œé˜»åŠ›ä½åˆ—</li>
                <li><strong>é£é™©è¯„ä¼°è¯¦æƒ…</strong>: ç‚¹å‡»é£é™©ç­‰çº§å¯æŸ¥çœ‹è¯¦ç»†è¯„ä¼°å‚æ•°å’Œé€»è¾‘</li>
                <li><strong>é£é™©ç®¡ç†å»ºè®®</strong>: åŸºäºé£é™©è¯„ä¼°æä¾›ä¸ªæ€§åŒ–å»ºè®®</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>1. æŒä»“åˆ—è¡¨ - æ”¯æ’‘é˜»åŠ›ä½æ˜¾ç¤º</h3>
            <p>æ–°å¢çš„æ”¯æ’‘ä½å’Œé˜»åŠ›ä½åˆ—ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿäº†è§£å…³é”®ä»·ä½ï¼š</p>
            
            <table class="portfolio-table">
                <thead>
                    <tr>
                        <th>è‚¡ç¥¨ä»£ç </th>
                        <th>è´­ä¹°ä»·æ ¼</th>
                        <th>å½“å‰ä»·æ ¼</th>
                        <th>ç›ˆäº</th>
                        <th>æ“ä½œå»ºè®®</th>
                        <th>ç½®ä¿¡åº¦</th>
                        <th>é£é™©ç­‰çº§</th>
                        <th style="background: #e7f3ff;">æ”¯æ’‘ä½</th>
                        <th style="background: #e7f3ff;">é˜»åŠ›ä½</th>
                        <th>è¡¥ä»“ä»·</th>
                        <th>å‡ä»“ä»·</th>
                        <th>é¢„æœŸåˆ°é¡¶</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>sz300741</td>
                        <td>Â¥26.92</td>
                        <td>Â¥19.81</td>
                        <td class="profit-negative">-26.4%</td>
                        <td><span class="action-hold">æŒæœ‰</span></td>
                        <td>65%</td>
                        <td>
                            <span class="risk-high risk-clickable" onclick="showRiskDemo('sz300741', 'HIGH')" title="ç‚¹å‡»æŸ¥çœ‹é£é™©è¯„ä¼°è¯¦æƒ…">
                                é«˜é£é™©
                            </span>
                        </td>
                        <td style="background: #f0f8ff; font-weight: 600;">Â¥19.64</td>
                        <td style="background: #fff0f0; font-weight: 600;">Â¥22.56</td>
                        <td>Â¥18.77</td>
                        <td>--</td>
                        <td>--</td>
                        <td><button onclick="alert('æŸ¥çœ‹è¯¦æƒ…')">è¯¦æƒ…</button></td>
                    </tr>
                    <tr>
                        <td>sh600618</td>
                        <td>Â¥10.30</td>
                        <td>Â¥10.38</td>
                        <td class="profit-positive">+0.8%</td>
                        <td><span class="action-hold">æŒæœ‰</span></td>
                        <td>55%</td>
                        <td>
                            <span class="risk-medium risk-clickable" onclick="showRiskDemo('sh600618', 'MEDIUM')" title="ç‚¹å‡»æŸ¥çœ‹é£é™©è¯„ä¼°è¯¦æƒ…">
                                ä¸­é£é™©
                            </span>
                        </td>
                        <td style="background: #f0f8ff; font-weight: 600;">Â¥9.40</td>
                        <td style="background: #fff0f0; font-weight: 600;">Â¥10.90</td>
                        <td>Â¥9.86</td>
                        <td>--</td>
                        <td>--</td>
                        <td><button onclick="alert('æŸ¥çœ‹è¯¦æƒ…')">è¯¦æƒ…</button></td>
                    </tr>
                    <tr>
                        <td>sz002021</td>
                        <td>Â¥2.32</td>
                        <td>Â¥2.42</td>
                        <td class="profit-positive">+4.3%</td>
                        <td><span class="action-reduce">å‡ä»“</span></td>
                        <td>70%</td>
                        <td>
                            <span class="risk-high risk-clickable" onclick="showRiskDemo('sz002021', 'HIGH')" title="ç‚¹å‡»æŸ¥çœ‹é£é™©è¯„ä¼°è¯¦æƒ…">
                                é«˜é£é™©
                            </span>
                        </td>
                        <td style="background: #f0f8ff; font-weight: 600;">Â¥2.33</td>
                        <td style="background: #fff0f0; font-weight: 600;">Â¥2.45</td>
                        <td>--</td>
                        <td>Â¥2.30</td>
                        <td>--</td>
                        <td><button onclick="alert('æŸ¥çœ‹è¯¦æƒ…')">è¯¦æƒ…</button></td>
                    </tr>
                </tbody>
            </table>
            
            <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 4px;">
                <strong>è¯´æ˜ï¼š</strong>
                <ul style="margin: 0.5rem 0 0 1rem;">
                    <li><span style="background: #f0f8ff; padding: 0.2rem 0.4rem;">æ”¯æ’‘ä½</span>ï¼šé‡è¦çš„ä»·æ ¼æ”¯æ’‘æ°´å¹³ï¼Œè·Œç ´å¯èƒ½ç»§ç»­ä¸‹è·Œ</li>
                    <li><span style="background: #fff0f0; padding: 0.2rem 0.4rem;">é˜»åŠ›ä½</span>ï¼šé‡è¦çš„ä»·æ ¼é˜»åŠ›æ°´å¹³ï¼Œçªç ´å¯èƒ½ç»§ç»­ä¸Šæ¶¨</li>
                    <li>ç‚¹å‡»é£é™©ç­‰çº§å¯æŸ¥çœ‹è¯¦ç»†é£é™©è¯„ä¼°</li>
                </ul>
            </div>
        </div>
        
        <div class="test-section">
            <h3>2. é£é™©è¯„ä¼°è¯¦æƒ…åŠŸèƒ½æ¼”ç¤º</h3>
            <p>ç‚¹å‡»ä¸Šè¡¨ä¸­çš„é£é™©ç­‰çº§ï¼Œæˆ–ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æŸ¥çœ‹é£é™©è¯„ä¼°è¯¦æƒ…ï¼š</p>
            
            <div style="display: flex; gap: 1rem; margin: 1rem 0;">
                <button onclick="showRiskDemo('sz300741', 'HIGH')" style="padding: 0.5rem 1rem; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    æŸ¥çœ‹é«˜é£é™©è¯¦æƒ…
                </button>
                <button onclick="showRiskDemo('sh600618', 'MEDIUM')" style="padding: 0.5rem 1rem; background: #ffc107; color: #212529; border: none; border-radius: 4px; cursor: pointer;">
                    æŸ¥çœ‹ä¸­é£é™©è¯¦æƒ…
                </button>
                <button onclick="showRiskDemo('sz002021', 'LOW')" style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
                    æŸ¥çœ‹ä½é£é™©è¯¦æƒ…
                </button>
            </div>
        </div>
    </div>
    
    <!-- é£é™©è¯„ä¼°è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div id="risk-assessment-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideRiskModal()">&times;</span>
            <h3 id="risk-assessment-title">é£é™©è¯„ä¼°è¯¦æƒ…</h3>
            <div id="risk-assessment-content">åŠ è½½ä¸­...</div>
        </div>
    </div>
    
    <script>
        function showRiskDemo(stockCode, riskLevel) {
            document.getElementById('risk-assessment-modal').style.display = 'block';
            document.getElementById('risk-assessment-title').textContent = `${stockCode} é£é™©è¯„ä¼°è¯¦æƒ…`;
            
            // æ¨¡æ‹Ÿä¸åŒé£é™©ç­‰çº§çš„æ•°æ®
            const demoData = {
                'HIGH': {
                    risk_level: 'HIGH',
                    risk_score: 8,
                    volatility: 42.88,
                    max_drawdown: 41.13,
                    price_position_pct: 85.5,
                    risk_factors: [
                        'é«˜æ³¢åŠ¨ç‡(42.9%)',
                        'å¤§å¹…å›æ’¤(41.1%)',
                        'ä»·æ ¼æ¥è¿‘è¿‘æœŸé«˜ç‚¹'
                    ]
                },
                'MEDIUM': {
                    risk_level: 'MEDIUM',
                    risk_score: 5,
                    volatility: 39.78,
                    max_drawdown: 42.80,
                    price_position_pct: 67.6,
                    risk_factors: [
                        'ä¸­ç­‰æ³¢åŠ¨ç‡(39.8%)',
                        'å¤§å¹…å›æ’¤(42.8%)'
                    ]
                },
                'LOW': {
                    risk_level: 'LOW',
                    risk_score: 2,
                    volatility: 18.5,
                    max_drawdown: 12.3,
                    price_position_pct: 35.2,
                    risk_factors: [
                        'ä½æ³¢åŠ¨ç‡(18.5%)',
                        'å›æ’¤æ§åˆ¶è‰¯å¥½(12.3%)'
                    ]
                }
            };
            
            displayRiskAssessmentDetail(demoData[riskLevel], stockCode);
        }
        
        function hideRiskModal() {
            document.getElementById('risk-assessment-modal').style.display = 'none';
        }
        
        function displayRiskAssessmentDetail(riskAssessment, stockCode) {
            const content = document.getElementById('risk-assessment-content');
            
            const riskLevel = riskAssessment.risk_level;
            const riskScore = riskAssessment.risk_score;
            const volatility = riskAssessment.volatility;
            const maxDrawdown = riskAssessment.max_drawdown;
            const pricePositionPct = riskAssessment.price_position_pct;
            const riskFactors = riskAssessment.risk_factors;
            
            const riskScoreClass = riskLevel === 'HIGH' ? 'risk-score-high' : 
                                  riskLevel === 'MEDIUM' ? 'risk-score-medium' : 'risk-score-low';
            
            let html = `
                <div class="risk-detail-grid">
                    <div class="risk-detail-section">
                        <h4>é£é™©ç­‰çº§è¯„ä¼°</h4>
                        <div class="risk-score-display ${riskScoreClass}">
                            ${getRiskText(riskLevel)}
                            <div style="font-size: 1rem; margin-top: 0.5rem;">
                                é£é™©è¯„åˆ†: ${riskScore}/9
                            </div>
                        </div>
                        <div style="text-align: center; color: #6c757d; font-size: 0.9rem;">
                            ${getRiskLevelDescription(riskLevel)}
                        </div>
                    </div>
                    
                    <div class="risk-detail-section">
                        <h4>é£é™©æŒ‡æ ‡</h4>
                        <div style="display: grid; gap: 0.8rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span>å¹´åŒ–æ³¢åŠ¨ç‡:</span>
                                <span style="font-weight: 600; color: ${volatility > 40 ? '#dc3545' : volatility > 25 ? '#ffc107' : '#28a745'};">
                                    ${volatility.toFixed(2)}%
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span>æœ€å¤§å›æ’¤:</span>
                                <span style="font-weight: 600; color: ${maxDrawdown > 20 ? '#dc3545' : maxDrawdown > 10 ? '#ffc107' : '#28a745'};">
                                    ${maxDrawdown.toFixed(2)}%
                                </span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; background: white; border-radius: 4px;">
                                <span>ä»·æ ¼ä½ç½®:</span>
                                <span style="font-weight: 600; color: ${pricePositionPct > 80 ? '#dc3545' : pricePositionPct < 20 ? '#28a745' : '#6c757d'};">
                                    ${pricePositionPct.toFixed(1)}%
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="risk-detail-section" style="grid-column: 1 / -1;">
                        <h4>é£é™©å› ç´ åˆ†æ</h4>
                        <ul style="list-style: none; padding: 0; margin: 0;">
                            ${riskFactors.map(factor => `<li style="padding: 0.3rem 0; border-bottom: 1px solid #dee2e6;">â€¢ ${factor}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="risk-detail-section" style="grid-column: 1 / -1;">
                        <h4>é£é™©ç®¡ç†å»ºè®®</h4>
                        <div style="background: white; padding: 1rem; border-radius: 4px; border-left: 4px solid #007bff;">
                            ${getRiskManagementAdvice(riskLevel, volatility, maxDrawdown, pricePositionPct)}
                        </div>
                    </div>
                </div>
            `;
            
            content.innerHTML = html;
        }
        
        function getRiskText(riskLevel) {
            const riskMap = {
                'HIGH': 'é«˜é£é™©',
                'MEDIUM': 'ä¸­é£é™©',
                'LOW': 'ä½é£é™©'
            };
            return riskMap[riskLevel] || 'æœªçŸ¥';
        }
        
        function getRiskLevelDescription(riskLevel) {
            switch (riskLevel) {
                case 'HIGH':
                    return 'é«˜é£é™©ï¼šå»ºè®®è°¨æ…æ“ä½œï¼Œå¯†åˆ‡å…³æ³¨å¸‚åœºå˜åŒ–';
                case 'MEDIUM':
                    return 'ä¸­ç­‰é£é™©ï¼šé€‚åº¦å…³æ³¨ï¼Œæ³¨æ„é£é™©æ§åˆ¶';
                case 'LOW':
                    return 'ä½é£é™©ï¼šç›¸å¯¹å®‰å…¨ï¼Œå¯é€‚å½“æŒæœ‰';
                default:
                    return 'é£é™©ç­‰çº§æœªçŸ¥';
            }
        }
        
        function getRiskManagementAdvice(riskLevel, volatility, maxDrawdown, pricePosition) {
            let advice = [];
            
            if (riskLevel === 'HIGH') {
                advice.push('â€¢ å»ºè®®è®¾ç½®è¾ƒç´§çš„æ­¢æŸä½ï¼Œæ§åˆ¶ä¸‹è¡Œé£é™©');
                advice.push('â€¢ è€ƒè™‘åˆ†æ‰¹å‡ä»“ï¼Œé™ä½ä»“ä½é£é™©');
                advice.push('â€¢ å¯†åˆ‡å…³æ³¨å¸‚åœºæƒ…ç»ªå’ŒæŠ€æœ¯é¢å˜åŒ–');
            } else if (riskLevel === 'MEDIUM') {
                advice.push('â€¢ ä¿æŒé€‚ä¸­ä»“ä½ï¼Œé¿å…è¿‡åº¦é›†ä¸­');
                advice.push('â€¢ è®¾ç½®åˆç†çš„æ­¢æŸå’Œæ­¢ç›ˆä½');
                advice.push('â€¢ å®šæœŸè¯„ä¼°æŒä»“é£é™©çŠ¶å†µ');
            } else {
                advice.push('â€¢ å¯é€‚å½“æŒæœ‰ï¼Œä½†ä»éœ€å…³æ³¨å¸‚åœºå˜åŒ–');
                advice.push('â€¢ è€ƒè™‘åœ¨åˆé€‚æ—¶æœºé€‚åº¦åŠ ä»“');
                advice.push('â€¢ ä¿æŒé•¿æœŸæŠ•èµ„å¿ƒæ€');
            }
            
            if (volatility > 40) {
                advice.push('â€¢ é«˜æ³¢åŠ¨ç‡æç¤ºï¼šæ³¨æ„çŸ­æœŸä»·æ ¼å‰§çƒˆæ³¢åŠ¨é£é™©');
            }
            
            if (maxDrawdown > 20) {
                advice.push('â€¢ å¤§å¹…å›æ’¤æç¤ºï¼šå†å²æœ€å¤§å›æ’¤è¾ƒå¤§ï¼Œéœ€è¦å¿ƒç†å‡†å¤‡');
            }
            
            if (pricePosition > 80) {
                advice.push('â€¢ é«˜ä½æç¤ºï¼šå½“å‰ä»·æ ¼æ¥è¿‘è¿‘æœŸé«˜ç‚¹ï¼Œæ³¨æ„å›è°ƒé£é™©');
            } else if (pricePosition < 20) {
                advice.push('â€¢ ä½ä½æç¤ºï¼šå½“å‰ä»·æ ¼æ¥è¿‘è¿‘æœŸä½ç‚¹ï¼Œå¯èƒ½å­˜åœ¨åå¼¹æœºä¼š');
            }
            
            return advice.join('<br>');
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('risk-assessment-modal');
            if (event.target === modal) {
                hideRiskModal();
            }
        }
    </script>
</body>
</html>