# 持仓管理功能使用指南

## 功能概述

持仓管理功能是一个完整的投资组合管理系统，提供持仓列表管理、深度分析、操作建议等功能。

## 主要功能

### 1. 持仓列表管理
- ✅ **添加持仓**: 支持添加股票代码、购买价格、数量、日期、备注
- ✅ **删除持仓**: 一键删除不需要的持仓记录
- ✅ **编辑持仓**: 修改持仓信息和备注
- ✅ **列表展示**: 清晰展示所有持仓的基本信息

### 2. 深度扫描分析
- 🔍 **技术指标分析**: MA、MACD、KDJ、RSI、布林带等
- 📊 **趋势分析**: 价格相对位置、趋势强度评估
- 💡 **操作建议**: 买入、卖出、持有、加仓、减仓、止损
- ⚠️ **风险评估**: 高/中/低风险等级，波动率分析
- 🎯 **价格目标**: 支撑阻力位、短中期目标价

### 3. 时间分析
- ⏰ **持仓天数**: 自动计算持仓时间
- 📅 **预期到顶日期**: 基于历史周期预测
- 🔄 **平均周期**: 分析股票的历史波动周期
- 💬 **时间建议**: 基于时间维度的操作建议

### 4. 智能提醒
- 💰 **补仓价提醒**: 建议的加仓价位
- 📈 **减仓价提醒**: 建议的减仓价位
- 🛑 **止损价提醒**: 风险控制价位
- 🔔 **到顶提醒**: 预期高点时间提醒

## 使用方法

### 启动系统
```bash
# 1. 启动后端服务
python backend/app.py

# 2. 打开浏览器访问
http://127.0.0.1:5000

# 3. 点击 "💼 持仓管理" 按钮
```

### 添加持仓
1. 点击 "➕ 添加持仓" 按钮
2. 填写股票信息：
   - **股票代码**: 如 SZ000001、SH600036
   - **购买价格**: 实际买入价格
   - **持仓数量**: 持有股数
   - **购买日期**: 买入日期
   - **备注**: 可选的备注信息
3. 点击 "添加" 完成

### 深度扫描
1. 点击 "🔍 深度扫描" 按钮
2. 系统自动分析所有持仓
3. 查看扫描结果：
   - 总体统计信息
   - 每个持仓的详细分析
   - 操作建议和风险评估

### 查看持仓详情
1. 点击股票代码链接
2. 查看详细分析报告：
   - 基本信息和盈亏情况
   - 操作建议和置信度
   - 风险评估和波动率
   - 价格目标和支撑阻力
   - 时间分析和预期到顶

## 操作建议说明

### 建议类型
- 🟢 **买入(BUY)**: 技术面良好，建议买入
- 🟡 **持有(HOLD)**: 保持现有仓位
- 🟠 **观察(WATCH)**: 密切关注，暂不操作
- 🔴 **回避(AVOID)**: 技术面转弱，建议回避
- 🔵 **加仓(ADD)**: 价格回调，可考虑补仓
- 🟣 **减仓(REDUCE)**: 获利丰厚，建议减仓
- 🔴 **止损(STOP_LOSS)**: 亏损较大，建议止损

### 置信度说明
- **90%+**: 高置信度，强烈建议
- **70-90%**: 中高置信度，建议执行
- **50-70%**: 中等置信度，谨慎考虑
- **50%以下**: 低置信度，仅供参考

## 风险等级说明

### 风险评估标准
- 🔴 **高风险(HIGH)**: 波动率>40%，回撤>20%
- 🟡 **中风险(MEDIUM)**: 波动率25-40%，回撤10-20%
- 🟢 **低风险(LOW)**: 波动率<25%，回撤<10%

### 风险因素
- 价格波动率
- 最大历史回撤
- 价格相对位置
- 技术指标背离

## 价格目标说明

### 目标价类型
- **下一阻力位**: 基于历史高点的阻力位
- **下一支撑位**: 基于历史低点的支撑位
- **短期目标**: 5%涨幅目标
- **中期目标**: 15%涨幅目标
- **止损位**: 8%跌幅止损

### 补仓减仓价
- **补仓价**: 基于RSI超卖和技术回调计算
- **减仓价**: 基于获利幅度和技术超买计算
- **止损价**: 基于风险控制和技术破位计算

## 时间分析说明

### 周期分析
- 基于历史峰值点计算平均周期
- 预测下一个可能的高点时间
- 提供基于时间的操作建议

### 时间建议
- **继续持有**: 距离预期高点较远
- **密切关注**: 接近预期高点时间
- **考虑减仓**: 可能已到周期高点

## 演示脚本

运行演示脚本查看功能：
```bash
python demo_portfolio_management.py
```

演示内容包括：
- 添加示例持仓
- 单个持仓分析
- 全量持仓扫描
- 结果保存和展示

## API接口

### 持仓管理接口
- `GET /api/portfolio` - 获取持仓列表
- `POST /api/portfolio` - 添加持仓
- `PUT /api/portfolio` - 更新持仓
- `DELETE /api/portfolio` - 删除持仓

### 分析接口
- `POST /api/portfolio/scan` - 扫描所有持仓
- `GET /api/portfolio/analysis/<stock_code>` - 获取单个持仓分析

## 数据存储

持仓数据存储在 `data/portfolio.json` 文件中，包含：
- 股票代码
- 购买价格和数量
- 购买日期
- 备注信息
- 创建和更新时间

## 注意事项

1. **数据准确性**: 确保输入的购买价格和日期准确
2. **复权处理**: 系统默认使用前复权数据进行分析
3. **实时性**: 分析基于最新的交易数据
4. **风险提示**: 所有建议仅供参考，投资需谨慎
5. **数据备份**: 建议定期备份持仓数据

## 技术特点

- 🚀 **高性能**: 并行计算，快速分析
- 🎯 **智能化**: 多维度分析，智能建议
- 📱 **响应式**: 适配各种屏幕尺寸
- 🔒 **安全性**: 本地存储，数据安全
- 🔧 **可扩展**: 模块化设计，易于扩展

## 更新日志

### v1.0.0 (2025-01-29)
- ✅ 完整的持仓管理功能
- ✅ 深度技术分析
- ✅ 智能操作建议
- ✅ 风险评估系统
- ✅ 时间周期分析
- ✅ Web界面支持

---

**免责声明**: 本系统提供的所有分析和建议仅供参考，不构成投资建议。投资有风险，入市需谨慎。